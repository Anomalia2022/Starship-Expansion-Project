//// IF YOU HAVE ROENGINES DELETE THE PATCH THAT DELETES DUPLICATED RAPTORS OTHERWISE CRYO WON'T SHOW UP////

@PART[cryoengine-deinonychus-1]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.549 // ~1.3m Nozzle
	
	%maxTemp = 1700
	%crashTolerance = 15
	%breakingForce = 250
	%breakingTorque = 250
	
	%engineType = Raptor
		
    %TechRequired = stagedCombustionNF
    %cost = 245
    %entryCost = 60000
    RP0conf = true
    @description ^=:$: <b><color=green>From CryoEngines mod</color></b>

    MODULE
    { name = ModuleTagEngineLiquidTurbo }
	
	MODULE
	{
		name = ModuleTundraRaptor
		enableActuateOut = true
		gimbalOutRange = 7.5
		gimbalOutSpeed = 5
	}
	
	@MODULE[ModuleEngines*]
	{
		%throttleResponseRate = 5
	}
	
	!MODULE[ModuleAlternator] {}
	
	@MODULE[ModuleB9PartSwitch]
	{
		!SUBTYPE[1.25m] {}
		!SUBTYPE[Boattail] {}
	}
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = B_Raptor_125
		transform = B_Raptor_Boat
	}
	
}

@PART[cryoengine-deinonychus-1]:FOR[RealismOverhaulEnginesPost]
{
    @title = Raptor (Surface Variant)

    @MODULE[ModuleEngineConfigs]
    {
		@CONFIG[Raptor]
		{
			@gimbalRange = 7.5
			@maxThrust = 2224 // https://twitter.com/elonmusk/status/1411798501923508227
			@minThrust = 889 //~40% throttle
		}
        !CONFIG:HAS[#name[Raptor?Vacuum]],*{}
    }
	
		@MODULE[ModuleGimbal]
	{
		%gimbalRange = 7.5
	}
}

@PART[cryoengine-eagle-1]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.745 // ~2.4m Nozzle
	
	
	!MODULE[ModuleGimbal] {}
	%maxTemp = 1700
	%crashTolerance = 15
	%breakingForce = 250
	%breakingTorque = 250
	
	%engineType = Raptor
	
	%TechRequired = stagedCombustionNF
    %cost = 245
    %entryCost = 60000
    RP0conf = true
    @description ^=:$: <b><color=green>From CryoEngines mod</color></b>

    MODULE
    { name = ModuleTagEngineLiquidTurbo }
	
	@MODULE[ModuleEngines*]
	{
		%throttleResponseRate = 5
	}
	!MODULE[ModuleAlternator] {}
	
	@MODULE[ModuleB9PartSwitch]
	{
		!SUBTYPE[2.5m] {}
	}
	
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = B_RaptorVac_25
	}
}

@PART[cryoengine-eagle-1]:FOR[RealismOverhaulEnginesPost]
{
    @title = Raptor (Vacuum Variant)

    @MODULE[ModuleEngineConfigs]
    {
        !CONFIG:HAS[~name[Raptor?Vacuum]],*{}
		@gimbalRange = = 0 
    }
}

@PART[cryoengine-deinonychus-1]:NEEDS[Waterfall]:FOR[RealismOverhaul]
{
  !EFFECTS {}
!MODULE[ModuleWaterfallFX] {}
  EFFECTS
  {
    fx-deinonychus
    {
			AUDIO
			{
				channel = Ship
				clip = Waterfall/Sounds/ZorgSounds/loop_raptor_sealevel
				volume = 0.0 0.0
				volume = 0.1 0.3
				volume = 1.0 1.0
				pitch = 0.0 0.7
				pitch = 1.0 1.0
				loop = true
			}
      PREFAB_PARTICLE
      {
        prefabName = fx_smokeTrail_light
        transformName = smokePoint
        emission = 0.0 0.0
        emission = 0.05 0.0
        emission = 0.075 0.25
        emission = 1.0 1.25
        speed = 0.0 0.25
        speed = 1.0 1.0
        localOffset = 0, 0, 0
      }
    }
    engage
    {
      AUDIO
      {
        channel = Ship
        clip = Waterfall/Sounds/ZorgSounds/engage_raptor
        volume = 1.0
        pitch = 1.0
        loop = false
      }
    }
    flameout
    {
      PREFAB_PARTICLE
      {
        prefabName = fx_exhaustSparks_flameout_2
        transformName = thrustTransform
        oneShot = true
      }
      AUDIO
      {
        channel = Ship
        clip = sound_explosion_low
        volume = 1.0
        pitch = 2.0
        loop = false
      }
    }
  }
  MODULE
  {
    name = ModuleWaterfallFX
    // This is a custom name
    moduleID = deinonychusFX
    // This links the effects to a given ModuleEngines
    engineID = Rutherford

    // List out all controllers we want available
    // This controller scales with atmosphere depth
    CONTROLLER
    {
      name = atmosphereDepth
      linkedTo = atmosphere_density
    }
    // This controller scales with effective throttle
    CONTROLLER
    {
      name = throttle
      linkedTo = throttle
    }
    // this controller generates a random value in the range specified
    CONTROLLER
    {
      name = random
      linkedTo = random
      range = -1,1
    }
    // -----------------------------------------------------
    // Past here should be generated with the ingame editor!
    // -----------------------------------------------------
    TEMPLATE
    {
      // This is the name of the template to use
      templateName = waterfall-methalox-lower-raptor-1
      // This field allows you to override the parentTransform name in the EFFECTS contained in the template
      overrideParentTransform = thrustTransform
	position = 0,0,0.02
	rotation = 0, 0, 0
	scale = 1.1, 1.1, 1.3
    }
  }
}

@PART[cryoengine-eagle-1]:NEEDS[Waterfall]:FOR[RealismOverhaul]
{
  !EFFECTS {}
!MODULE[ModuleWaterfallFX] {}
 EFFECTS
  {
    fx-eagle
    {
			AUDIO
			{
				channel = Ship
				clip = Waterfall/Sounds/ZorgSounds/loop_raptor_sealevel
				volume = 0.0 0.0
				volume = 0.1 0.3
				volume = 1.0 1.0
				pitch = 0.0 0.7
				pitch = 1.0 1.0
				loop = true
			}


      PREFAB_PARTICLE
      {
        prefabName = fx_smokeTrail_light
        transformName = smokePoint
        emission = 0.0 0.0
        emission = 0.05 0.0
        emission = 0.075 0.25
        emission = 1.0 1.25
        speed = 0.0 0.25
        speed = 1.0 1.0
      }
    }
    engage
    {
			AUDIO
			{
				channel = Ship
				clip = Waterfall/Sounds/ZorgSounds/engage_raptor
				volume = 1.0
				pitch = 1.0
				loop = false
			}
    }
    flameout
    {
      PREFAB_PARTICLE
      {
        prefabName = fx_exhaustSparks_flameout_2
        transformName = thrustTransform
        oneShot = true
      }
      AUDIO
      {
        channel = Ship
        clip = sound_explosion_low
        volume = 1.0
        pitch = 2.0
        loop = false
      }
    }
  }
  MODULE
  {
    name = ModuleWaterfallFX
    // This is a custom name
    moduleID = eagleFX
    // This links the effects to a given ModuleEngines
    engineID = Rutherford

    // List out all controllers we want available
    // This controller scales with atmosphere depth
    CONTROLLER
    {
      name = atmosphereDepth
      linkedTo = atmosphere_density
    }
    // This controller scales with effective throttle
    CONTROLLER
    {
      name = throttle
      linkedTo = throttle
    }
    // this controller generates a random value in the range specified
    CONTROLLER
    {
      name = random
      linkedTo = random
      range = -1,1
    }
    // -----------------------------------------------------
    // Past here should be generated with the ingame editor!
    // -----------------------------------------------------
    TEMPLATE
    {
      // This is the name of the template to use
      templateName = waterfall-methalox-upper-raptor-1
      // This field allows you to override the parentTransform name in the EFFECTS contained in the template
      overrideParentTransform = fxTransformPlume
position = 0,0.7,0
rotation = 90, 0, 0
scale = 2.1, 2.1, 2
    }
  }
}
